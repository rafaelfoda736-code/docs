<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Route Now — Encerramento de Rotas | Guia de Erros</title>
  <meta name="description" content="Página-guia: todos os erros possíveis no encerramento de rotas, como identificar, corrigir e justificar. Estilo consistente com o Manual do Suporte Route Now." />
  <meta name="theme-color" content="#003366" />

  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
  <link rel="stylesheet" href="pagprincipal.css">

  <style>
    /* Ajustes pontuais desta página (sem quebrar o estilo global) */
    .page-hero{
      position:relative; min-height: 66vh; color:#fff;
      background: radial-gradient(1200px 600px at 85% 10%, rgba(13,110,253,.25), transparent),
                  linear-gradient(180deg, #001a33 0%, #001429 40%, #001024 100%);
      overflow:hidden;
    }
    .page-hero .lead{ color:#e9eef9 !important }
    .toc-sticky{ position: sticky; top: 88px }
    .toc .list-group-item{ border:none; padding:.5rem .75rem }
    .toc .list-group-item.active{ background: linear-gradient(135deg, var(--brand-500), var(--brand-700)); border:none }
    .section-kicker{ letter-spacing:.12em; text-transform:uppercase; font-weight:800; color:#003366 }
    .placeholder-note{ opacity:.8 }
    .edit-slot{
      border: 1px dashed rgba(0,0,0,.18);
      border-radius: .75rem; padding: .85rem;
      background: #fffdf7;
    }
    .edit-slot .placeholder{ color:#6c757d; font-style: italic }
    .checklist li{ margin-bottom:.35rem }
    .anchor-offset{ scroll-margin-top: 92px }
    .sub-accordion .accordion-button{ padding-left: 2.5rem }
    .kbd{ font-family: ui-monospace, SFMono-Regular, Menlo, monospace; background:#f3f4f6; border:1px solid #e5e7eb; border-radius:6px; padding:.05rem .35rem; }
    /* Corrige contraste em listas do hero (o CSS global define li/p pretos) */
    header.page-hero li, header.page-hero p{ color:#ffffff !important }
  </style>
</head>

<body data-bs-spy="scroll" data-bs-target="#toc" data-bs-offset="120" tabindex="0">
  <!-- Navbar (mesma base do index) -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top py-2">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center gap-2" href="index.html">
        <i class="bi bi-truck-front-fill text-primary"></i>
        <span class="fw-bold">Route Now</span>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu" aria-controls="navMenu" aria-expanded="false" aria-label="Alternar navegação">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navMenu">
        <ul class="navbar-nav ms-auto small text-uppercase fw-semibold">
          <li class="nav-item"><a class="nav-link" href="#sumario">Sumário</a></li>
          <li class="nav-item"><a class="nav-link" href="#erros">Erros</a></li>
          <li class="nav-item"><a class="nav-link" href="#justificativas">Justificativas</a></li>
          <li class="nav-item"><a class="nav-link" href="#kms">KM</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Hero -->
  <header class="page-hero d-flex align-items-center">
    <div class="container position-relative">
      <div class="row align-items-center g-4">
        <div class="col-lg-7">
          <h1 class="display-6 fw-extrabold mb-2">Encerramento de Rotas — <span class="text-info">Todos os Erros & Tratamentos</span></h1>
          <p class="lead mb-4">Estrutura organizada para você preencher, passo a passo, como identificar, corrigir e justificar cada situação no painel de controle.</p>
          <ul class="mb-0">
            <li>Visual limpo e padronizado com o <strong>Manual do Suporte</strong>.</li>
            <li>Sumário lateral, acordeões e <em>slots</em> prontos para texto longo.</li>
            <li>Campo separado para <strong>Justificativas</strong> e <strong>KM</strong>.</li>
          </ul>
        </div>
        <div class="col-lg-5">
          <div class="soft-card p-4">
            <div class="d-flex align-items-center gap-3 mb-2">
              <div class="icon"><i class="bi bi-magic"></i></div>
              <h2 class="h6 m-0">Como usar esta página</h2>
            </div>
            <div class="small">
              <ol class="mb-2">
                <li>Abra cada cartão e substitua o texto de exemplo pelos seus procedimentos.</li>
                <li>Mantenha os títulos para facilitar a busca (o filtro funciona por palavras).</li>
                <li>Se preferir, copie estes blocos para um editor e volte a colar aqui.</li>
              </ol>
              <div class="alert alert-info py-2 small mb-0">
                <i class="bi bi-info-circle me-2"></i><strong>Dica:</strong> deixe prints e links prontos; você pode reutilizar o <span class="kbd">class="img-preview"</span> do site principal para prévias no hover.
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Busca rápida -->
      <div class="row mt-4 g-3">
        <div class="col-lg-7">
          <div class="input-group input-group-lg">
            <span class="input-group-text"><i class="bi bi-search"></i></span>
            <input id="liveSearch" type="search" class="form-control" placeholder="Filtrar por palavra-chave (ex.: 'placa', 'duplicado', 'desvio', 'km previsto'...)">
          </div>
          <p class="small text-white-50 mt-2 placeholder-note">O filtro atua sobre títulos e conteúdo dos cartões abaixo.</p>
        </div>
      </div>
    </div>
  </header>

  <!-- Conteúdo -->
  <main class="py-6">
    <div class="container">
      <div class="row g-4">
        <!-- TOC lateral -->
        <aside class="col-xl-3 col-lg-4" id="sumario">
          <div class="toc-sticky">
            <h2 class="section-title h6 text-uppercase mb-3">Sumário</h2>
            <div id="toc" class="list-group toc">
              <a class="list-group-item list-group-item-action active" href="#erros"><i class="bi bi-exclamation-triangle me-2"></i>Todos os erros</a>
              <a class="list-group-item list-group-item-action" href="#justificativas"><i class="bi bi-clipboard-check me-2"></i>Justificativas</a>
              <a class="list-group-item list-group-item-action" href="#kms"><i class="bi bi-speedometer2 me-2"></i>KM</a>
            </div>
            <div class="soft-card p-3 mt-3 small">
              <div class="mb-2 fw-bold text-uppercase">Atalhos</div>
              <div class="d-grid gap-2">
                <a class="btn btn-primary btn-sm" href="index.html#encerrar"><i class="bi bi-flag-fill me-1"></i> Guia principal</a>
                <a class="btn btn-outline-primary btn-sm" href="#erros-duplicados"><i class="bi bi-shuffle me-1"></i> Eventos duplicados</a>
                <a class="btn btn-outline-primary btn-sm" href="#justificativas"><i class="bi bi-pen me-1"></i> Como justificar</a>
                <a class="btn btn-outline-primary btn-sm" href="#kms"><i class="bi bi-rulers me-1"></i> Divergência de KM</a>
              </div>
            </div>
          </div>
        </aside>

        <!-- Área de conteúdo -->
        <section class="col-xl-9 col-lg-8">

          <!-- Seção: Erros -->
          <div id="erros" class="anchor-offset">
            <h2 class="section-title text-uppercase fw-extrabold mb-3">Todos os erros possíveis que pode ocorrer no encerramento das rotas</h2>

            <div class="accordion" id="accErros" data-search-scope>
              <!-- 1. Horários errados -->
              <div class="accordion-item" data-search="1 horários horas horario errado inicio fim bandeiras datas fora de ordem virada do dia">
                <h2 class="accordion-header" id="h1">
                  <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#c1" aria-expanded="true" aria-controls="c1">
                    1 — Horários errados
                  </button>
                </h2>
                <div id="c1" class="accordion-collapse collapse show" aria-labelledby="h1" data-bs-parent="#accErros">
                  <div class="accordion-body">
                    <div class="row g-3">
                      <div class="col-md-6">
                        <div class="soft-card p-3 h-100">
                          <div class="section-kicker mb-1">Como identificar</div>
                          <div class="edit-slot">
                            <p class="">Para identificar se o problema no encerramento da rota está relacionado ao horário, abra o trajeto no mapa e localize as duas bandeiras: a amarela indica a saída (início da rota) e a quadriculada indica o regresso (fim da rota). Em termos gerais, essas bandeiras devem ficar juntas e sobre a filial, pois o caminhão sai da filial e retorna a ela ao final da rota. Para confirmar, clique no evento mais próximo de cada bandeira e verifique se o nome da ação contém “saída” e “regresso”.</p>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="soft-card p-3 h-100">
                          <div class="section-kicker mb-1">Como corrigir</div>
                          <div class="edit-slot">
                            <p class="">Para corrigir, no Painel de Controle localize as colunas “Data início (manual)” — usada para ajustar a saída da rota — e “Data término (manual)” — usada para ajustar o regresso da rota. Caso essas colunas não estejam visíveis, pressione F6 para abrir a tela com todas as colunas disponíveis. Vale lembrar que o sistema não permite rotas com duração superior a 48 horas, como medida de prevenção de erros, embora não trabalhemos com rotas próximas a dois dias completos.</p>
                          </div>
                        </div>
                      </div>
                      <div class="col-12">
                        <div class="alert alert-warning mb-0"><i class="bi bi-lightning-charge me-2"></i><strong>Boas práticas:</strong> manter coerência com o sequenciamento da rota; documentar alterações no campo <em>Complemento</em>.</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- 2. Localização dos produtores -->
              <div class="accordion-item" data-search="2 localização produtores lat long georreferenciamento raio mapa ajuste">
                <h2 class="accordion-header" id="h2">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#c2" aria-expanded="false" aria-controls="c2">
                    2 — Localização dos produtores
                  </button>
                </h2>
                <div id="c2" class="accordion-collapse collapse" aria-labelledby="h2" data-bs-parent="#accErros">
                  <div class="accordion-body">
                    <div class="row g-3">
                      <div class="col-md-6">
                        <div class="soft-card p-3 h-100">
                          <div class="section-kicker mb-1">Conferência</div>
                          <div class="edit-slot">
                            <p class="placeholder">Passos para validar latitude/longitude, raio padrão (ex.: 250m) e referência no cadastro.</p>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="soft-card p-3 h-100">
                          <div class="section-kicker mb-1">Ajustes</div>
                          <div class="edit-slot">
                            <p class="placeholder">Como editar a localização pelo nome (em azul), abrir cadastro, clicar em <strong>Editar</strong> e salvar.</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- 3. Falha de sinal -->
              <div class="accordion-item" data-search="3 falha de sinal linhas retas rastreador histórico mix telematics comunicação buracos no trajeto">
                <h2 class="accordion-header" id="h3">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#c3" aria-expanded="false" aria-controls="c3">
                    3 — Falha de sinal
                  </button>
                </h2>
                <div id="c3" class="accordion-collapse collapse" aria-labelledby="h3" data-bs-parent="#accErros">
                  <div class="accordion-body">
                    <div class="row g-3">
                      <div class="col-lg-7">
                        <div class="soft-card p-3 h-100">
                          <div class="section-kicker mb-1">Diagnóstico</div>
                          <div class="edit-slot">
                            <p class="placeholder">Como reconhecer falha de sinal no mapa (linhas retas), checar histórico no rastreador, datas afetadas etc.</p>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-5">
                        <div class="soft-card p-3 h-100">
                          <div class="section-kicker mb-1">Ação</div>
                          <ul class="small checklist mb-0">
                            <li>Confirmar evidências e registrar ocorrência.</li>
                            <li>Avisar responsável do indicador de falha.</li>
                            <li>Abrir chamado para empresa de rastreamento (se aplicável).</li>
                          </ul>
                        </div>
                      </div>
                    </div>
                    <div class="alert alert-info mt-3 mb-0"><i class="bi bi-info-circle me-2"></i>Acompanhe impactos em <strong>KM rodado</strong> e <strong>fechamento por filial</strong> no indicador.</div>
                  </div>
                </div>
              </div>

              <!-- 4. Eventos de paradas duplicados -->
              <div class="accordion-item" id="erros-duplicados" data-search="4 eventos paradas duplicados execução conflito remover ajustar sequencia">
                <h2 class="accordion-header" id="h4">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#c4" aria-expanded="false" aria-controls="c4">
                    4 — Eventos de paradas duplicados que implicam na execução do evento
                  </button>
                </h2>
                <div id="c4" class="accordion-collapse collapse" aria-labelledby="h4" data-bs-parent="#accErros">
                  <div class="accordion-body">
                    <div class="soft-card p-3">
                      <div class="section-kicker mb-1">Tratamento</div>
                      <div class="edit-slot">
                        <p class="placeholder">Explique como identificar duplicidades (cores, ordem, timestamps) e o procedimento para manter apenas o evento válido e ajustar a execução.</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- 5. Placa do caminhão errada -->
              <div class="accordion-item" data-search="5 placa caminhão errada alterar caminhao operações reboques motorista">
                <h2 class="accordion-header" id="h5">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#c5" aria-expanded="false" aria-controls="c5">
                    5 — Placa do caminhão errada
                  </button>
                </h2>
                <div id="c5" class="accordion-collapse collapse" aria-labelledby="h5" data-bs-parent="#accErros">
                  <div class="accordion-body">
                    <div class="row g-3">
                      <div class="col-md-6">
                        <div class="soft-card p-3 h-100">
                          <div class="section-kicker mb-1">Correção rápida</div>
                          <ul class="small checklist mb-0">
                            <li>Abrir <em>Operações → Alterar caminhão</em>.</li>
                            <li>Validar reboques e motorista.</li>
                            <li>Confirmar antes do encerramento.</li>
                          </ul>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="soft-card p-3 h-100">
                          <div class="section-kicker mb-1">Observações</div>
                          <div class="edit-slot">
                            <p class="placeholder">Inclua aqui procedimentos específicos por cliente/filial, se houver.</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- 6. Roteirização importada errada -->
              <div class="accordion-item" data-search="6 roteirização importada errada macros planilha imp padronizar ordem roteirizador">
                <h2 class="accordion-header" id="h6">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#c6" aria-expanded="false" aria-controls="c6">
                    6 — Roteirização foi importada errada
                  </button>
                </h2>
                <div id="c6" class="accordion-collapse collapse" aria-labelledby="h6" data-bs-parent="#accErros">
                  <div class="accordion-body">
                    <div class="soft-card p-3">
                      <div class="section-kicker mb-1">Passo a passo</div>
                      <div class="edit-slot">
                        <p class="placeholder">Detalhe a revisão do arquivo do cliente, a execução dos macros no roteirizador, uso da aba IMP, o <strong>PADRONIZAR</strong> e a transferência para planilha nova.</p>
                      </div>
                    </div>
                    <div class="alert alert-danger mt-3 mb-0"><i class="bi bi-exclamation-octagon me-2"></i>Nunca salve o arquivo do roteirizador (evita perder os macros).</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Seção: Justificativas (7) -->
          <div id="justificativas" class="anchor-offset mt-5">
            <h2 class="section-title text-uppercase fw-extrabold mb-3">7 — Ensinar como colocar justificativa e suas funções</h2>
            <div class="soft-card p-4 mb-3">
              <div class="row g-3">
                <div class="col-lg-6">
                  <div class="section-kicker mb-1">Onde inserir</div>
                  <div class="edit-slot">
                    <p class="placeholder">Explique o ponto da tela (ex.: <em>Inserir</em> → selecionar motivo → <strong>Complemento</strong> → confirmar).</p>
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class="section-kicker mb-1">Boas práticas</div>
                  <ul class="small checklist mb-0">
                    <li>Registrar KM previsto a descontar/acrescentar quando aplicável.</li>
                    <li>Descrever com clareza (quem, quando, por quê).</li>
                    <li>Usar evidências (print, número do chamado, etc.).</li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- Sub-acordeão das justificativas -->
            <div class="accordion sub-accordion" id="accJust">
              <div class="accordion-item" data-search="7.1 tanque comunitário justificativa">
                <h2 class="accordion-header" id="h71">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#c71" aria-expanded="false" aria-controls="c71">
                    7.1 — Tanque comunitário
                  </button>
                </h2>
                <div id="c71" class="accordion-collapse collapse" aria-labelledby="h71" data-bs-parent="#accJust">
                  <div class="accordion-body">
                    <div class="edit-slot">
                      <p class="placeholder">Definir quando usar, qual motivo selecionar e qual texto padrão sugerido.</p>
                    </div>
                  </div>
                </div>
              </div>

              <div class="accordion-item" data-search="7.2 executado em outro ponto justificativa">
                <h2 class="accordion-header" id="h72">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#c72" aria-expanded="false" aria-controls="c72">
                    7.2 — Executado em outro ponto
                  </button>
                </h2>
                <div id="c72" class="accordion-collapse collapse" aria-labelledby="h72" data-bs-parent="#accJust">
                  <div class="accordion-body">
                    <div class="edit-slot">
                      <p class="placeholder">Indicar como relacionar a rota/ponto válido e o que lançar de complemento/KM.</p>
                    </div>
                  </div>
                </div>
              </div>

              <div class="accordion-item" data-search="7.3 desvio justificativa">
                <h2 class="accordion-header" id="h73">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#c73" aria-expanded="false" aria-controls="c73">
                    7.3 — Desvio
                  </button>
                </h2>
                <div id="c73" class="accordion-collapse collapse" aria-labelledby="h73" data-bs-parent="#accJust">
                  <div class="accordion-body">
                    <div class="edit-slot">
                      <p class="placeholder">Descrever quando marcar desvio, impactos em KM e documentação mínima.</p>
                    </div>
                  </div>
                </div>
              </div>

              <div class="accordion-item" data-search="7.4 tanque cheio justificativa">
                <h2 class="accordion-header" id="h74">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#c74" aria-expanded="false" aria-controls="c74">
                    7.4 — Tanque cheio
                  </button>
                </h2>
                <div id="c74" class="accordion-collapse collapse" aria-labelledby="h74" data-bs-parent="#accJust">
                  <div class="accordion-body">
                    <div class="edit-slot">
                      <p class="placeholder">Critérios para uso, ajustes de execução e observações a lançar.</p>
                    </div>
                  </div>
                </div>
              </div>

              <div class="accordion-item" data-search="7.5 leite quente justificativa">
                <h2 class="accordion-header" id="h75">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#c75" aria-expanded="false" aria-controls="c75">
                    7.5 — Leite quente
                  </button>
                </h2>
                <div id="c75" class="accordion-collapse collapse" aria-labelledby="h75" data-bs-parent="#accJust">
                  <div class="accordion-body">
                    <div class="edit-slot">
                      <p class="placeholder">Condições para registro, evidências esperadas e instruções de complemento.</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Seção: KM (8) -->
          <div id="kms" class="anchor-offset mt-5">
            <h2 class="section-title text-uppercase fw-extrabold mb-3">8 — Problemas com KM</h2>

            <div class="row g-3">
              <div class="col-md-6">
                <div class="soft-card p-3 h-100" data-search="km status divergente">
                  <h3 class="h6 mb-2">KM — Status divergente</h3>
                  <div class="edit-slot">
                    <p class="placeholder">Explique os cenários de status divergente e o passo a passo de regularização.</p>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="soft-card p-3 h-100" data-search="km rodado total não reintegrado posições">
                  <h3 class="h6 mb-2">KM rodado total (quando não reintegrado as posições)</h3>
                  <div class="edit-slot">
                    <p class="placeholder">Quando o KM fica sub/ superestimado por falta de reintegração de posições — procedimentos e validações.</p>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="soft-card p-3 h-100" data-search="km previsto total">
                  <h3 class="h6 mb-2">KM previsto total</h3>
                  <div class="edit-slot">
                    <p class="placeholder">Onde consultar, como ajustar e quando recalcular o previsto.</p>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="soft-card p-3 h-100" data-search="km telemetria">
                  <h3 class="h6 mb-2">KM telemetria</h3>
                  <div class="edit-slot">
                    <p class="placeholder">Orientações para conferir o KM pela telemetria e reconciliar com o painel.</p>
                  </div>
                </div>
              </div>
            </div>

            <div class="alert alert-secondary small mt-3 mb-0">
              <i class="bi bi-clipboard-data me-2"></i><strong>Checklist de conferência:</strong> verificar placa correta, período filtrado, falhas de sinal, execução de eventos e justificativas que alterem KM.
            </div>
          </div>

          <div class="text-muted small mt-5">Última revisão: <span id="lastYear"></span></div>
        </section>
      </div>
    </div>
  </main>

  <!-- Voltar ao topo -->
  <button id="backToTop" class="btn btn-primary btn-lg rounded-circle" aria-label="Voltar ao topo"><i class="bi bi-arrow-up"></i></button>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Botão voltar ao topo
    const btn = document.getElementById('backToTop');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 600) btn.classList.add('show'); else btn.classList.remove('show');
    });
    btn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));

    // Ano
    document.getElementById('lastYear').textContent = new Date().getFullYear();

    // Filtro ao vivo por texto: busca dentro de [data-search-scope] (accordion) e cartões com [data-search]
    const input = document.getElementById('liveSearch');
    const scopes = document.querySelectorAll('[data-search-scope]');
    const cards  = document.querySelectorAll('[data-search]');

    const matches = (el, q) => {
      const hay = (el.dataset.search || '') + ' ' + el.textContent;
      return hay.toLowerCase().includes(q);
    };

    input.addEventListener('input', () => {
      const q = input.value.trim().toLowerCase();
      if (!q){
        // Reseta: mostra tudo
        scopes.forEach(sc => sc.querySelectorAll('.accordion-item').forEach(it => it.style.display = ''));
        cards.forEach(c => c.style.display = '');
        return;
      }
      // Filtra acordeões
      scopes.forEach(sc => {
        sc.querySelectorAll('.accordion-item').forEach(it => {
          it.style.display = matches(it, q) ? '' : 'none';
        });
      });
      // Filtra cartões simples
      cards.forEach(c => c.style.display = matches(c, q) ? '' : 'none');
    });

    // Scrollspy nos itens do TOC
    const toc = document.getElementById('toc');
    new bootstrap.ScrollSpy(document.body, { target: '#toc', offset: 120 });
  </script>
</body>
</html>
